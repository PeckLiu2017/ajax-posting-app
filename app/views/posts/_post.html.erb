<div id="post-<%= post.id %>" class="panel panel-default">
  <div class="panel-heading">
    <%= post.user.display_name %>
  </div>
  <div class="panel-body">
    <span id="post-thumbsup-<%= post.id %>" class="label label-success"><%= post.likes.count %> ğŸ‘</span>
    <span class="average-score"><%= post.average_score %></span>
    <div class="raty" data-score="<%= post.find_score(current_user).try(:score) || 0 %>" data-score-url="<%= rate_post_path(post) %>"></div>

    <%= post.content %>
    <div class="text-right">
      <p class="text-right" style="display:inline-block;">
    <span id="post-like-<%= post.id %>">
      <%= render :partial => "like", :locals => { :post => post } %>
    </span>

        </p>
    <% if current_user && post.user == current_user %>
      <p class="text-right" style="display:inline-block;">
        <%#= link_to "Delete", post_path(post), :method => :delete, :class => "btn btn-danger", :remote => true %>
        <!-- è‡ªè¡Œç»‘å®šäº‹ä»¶ -->
        <%= link_to "Delete", post_path(post), :class => "delete-post btn btn-danger" %>
      </p>
    <% end %>
  </div>
</div>

  <div class="panel-footer">
    <% if current_user && current_user.is_admin? %>
      <label>

      <%= select_tag "category_id[#{post.id}]", options_for_select(Category.all.map{ |x| [x.name, x.id]}, post.category_id),
             :data => { :url => post_path(post) }, :prompt => "è¯·é€‰æ‹©åˆ†ç±»", :class => "select_category" %>
      <%= check_box_tag "mark_flag[#{post.id}]", 1, post.flag_at.present?,
            :data => { :url => toggle_flag_post_path(post) }, :class => "toggle-flag" %> æ ‡è®°ä¸ºåƒåœ¾
        <span id="post-flag-<%= post.id %>"><%= post.flag_at %></span>
      </label>
    <% end %>
  </div>

</div>
<!-- <script type="text/javascript">
   // è¿™ä¼šç»‘ click äº‹ä»¶åˆ°æ‰€æœ‰æœ‰ `.delete-post` class çš„å…ƒç´ ä¸Šï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰çš„åˆ é™¤æŒ‰é’®
   $(".delete-post").click(function(evt){
     // `evt` æ˜¯æµè§ˆå™¨çš„äº‹ä»¶ç‰©ä»¶ï¼Œevt.preventDefault(); ä¼šç»ˆæ­¢è¿™ä¸ªå…ƒç´ çš„é»˜è®¤è¡Œä¸ºï¼š
     // è¶…è¿ç»“ a çš„é»˜è®¤è¡Œä¸ºæ˜¯è·³åˆ°ä¸‹ä¸€é¡µï¼Œå¦‚æœæ²¡æœ‰è¿™è¡Œçš„è¯ï¼Œé€å‡º ajax åä¼šè·³å» show page
     evt.preventDefault();
     // this æ˜¯ä¸ªç‰¹åˆ«çš„å˜é‡ï¼Œä»£è¡¨è§¦å‘äº‹ä»¶çš„å…ƒç´ ã€‚ä½¿ç”¨ attr å¯ä»¥è¯»å–å…ƒç´ çš„å±æ€§ï¼Œè¿™é‡Œè¦æ‹¿åˆ°è¶…è¿ç»“çš„ç½‘å€
     var url = $(this).attr("href");

     // é€å‡º Ajax
     $.ajax({
       url: url,
       method: 'DELETE',
       dataType: 'script' // è¦æ±‚æœåŠ¡å™¨å›ä¼  javascript
     })
   })

</script> -->
